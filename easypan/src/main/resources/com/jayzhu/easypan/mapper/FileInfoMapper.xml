<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jayzhu.easypan.mapper.FileInfoMapper">

    <select id="selectByQuery" resultType="com.jayzhu.easypan.entity.vo.FileInfoVo">
        select file_id,
        user_id,
        file_md5,
        file_pid,
        file_size,
        file_name,
        file_cover,
        file_path,
        create_time,
        last_update_time,
        folder_type,
        file_category,
        file_type,
        status,
        recovery_time,
        del_flag
        from file_info
        <where>
            user_id = #{userId}
            and file_pid = #{filePid}
            and del_flag= #{delFlag}
            <if test="fileNameFuzzy != '' and fileNameFuzzy != null">
                and file_name like "%"#{fileNameFuzzy}"%"
            </if>
            <if test="category != 0 and category != null">
                and t.category = #{category}
            </if>
        </where>
        order by ${orderBy}
    </select>
</mapper>
